

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWP SERVER</title>
    <style>
        :root {
            --bg-color-dark: #0a0a0a;
            --text-color-dark: #fff;
            --card-bg-dark: rgba(25, 25, 35, 0.85);
            --feature-card-bg-dark: rgba(45, 45, 65, 0.7);
            --border-color-dark: rgba(255, 255, 255, 0.1);
            --primary-color: #7289da;
            --primary-shadow-color: rgba(114, 137, 218, 0.7);
            --input-bg-dark: rgba(30, 30, 30, 0.8);
            --placeholder-color-dark: #ccc;
        }

        .light-mode {
            --bg-color-dark: #f0f2f5;
            --text-color-dark: #333;
            --card-bg-dark: rgba(255, 255, 255, 0.9);
            --feature-card-bg-dark: rgba(240, 240, 245, 0.9);
            --border-color-dark: rgba(0, 0, 0, 0.1);
            --primary-color: #5865f2;
            --primary-shadow-color: rgba(88, 101, 242, 0.5);
            --input-bg-dark: rgba(255, 255, 255, 0.95);
            --placeholder-color-dark: #666;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        
        body {
            background-color: var(--bg-color-dark);
            color: var(--text-color-dark);
            overflow-x: hidden;
            background-image: url('https://cdn.discordapp.com/attachments/1137869934010052668/1375892910922272899/IMG_7206.jpg?ex=683357a0&is=68320620&hm=eaeaec759217ae74d7636bc562f6c84e4e1e10636a9b77193559f94fa33c829e&');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            height: 100vh;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(10, 10, 10, 0.8), rgba(20, 20, 35, 0.85));
            z-index: -1;
        }
        
        .light-mode body::before {
            background: linear-gradient(rgba(240, 242, 245, 0.8), rgba(220, 220, 235, 0.85));
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color-dark);
            margin-bottom: 40px;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo img {
            width: 72px;
            height: 72px;
            margin-left: 15px;
        }

        .logo-text {
            font-size: 28px;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        nav ul {
            display: flex;
            list-style: none;
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
            justify-content: center;
        }

        nav ul li {
            margin-right: 15px; /* Smaller margin */
            margin-bottom: 10px; /* For wrapping */
        }

        nav ul li:last-child {
            margin-right: 0;
        }

        .btn {
            background-color: var(--primary-color);
            color: #fff;
            padding: 10px 20px; /* Slightly smaller padding */
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            box-shadow: 0 0 15px var(--primary-shadow-color);
            position: relative;
            overflow: hidden;
            font-size: 16px; /* Adjust font size if needed */
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px var(--primary-shadow-color);
        }

        .main-content {
            text-align: center;
            margin-top: 50px;
        }

        .title {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--primary-color);
            text-shadow: 0 0 15px var(--primary-shadow-color);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 10px var(--primary-shadow-color);
            }
            to {
                text-shadow: 0 0 20px var(--primary-color), 0 0 30px var(--primary-shadow-color);
            }
        }

        .subtitle {
            font-size: 20px;
            margin-bottom: 40px;
            color: var(--placeholder-color-dark);
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap; /* Allow wrapping for smaller screens */
        }

        .page {
            display: none;
            padding: 40px;
            background: var(--card-bg-dark);
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 0 30px var(--primary-shadow-color);
            animation: fadeIn 0.5s ease;
            max-height: 500px;
            overflow-y: auto;
            text-align: right;
            backdrop-filter: blur(5px);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
            font-size: 28px;
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        .page p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .page ul {
            padding-right: 20px;
            margin-bottom: 20px;
        }

        .page ul li {
            margin-bottom: 10px;
        }

        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: var(--feature-card-bg-dark);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--primary-shadow-color);
            text-align: center;
            backdrop-filter: blur(5px);
        }

        .light-mode .feature-card {
            border: 1px solid rgba(88, 101, 242, 0.3);
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px var(--primary-shadow-color);
            border-color: var(--primary-color);
        }

        .feature-icon {
            font-size: 36px;
            margin-bottom: 15px;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-shadow-color);
        }

        .feature-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .feature-desc {
            font-size: 16px;
            color: var(--placeholder-color-dark);
            line-height: 1.5;
        }

        .rating-form, .login-form {
            text-align: right;
            padding: 20px;
            background: var(--feature-card-bg-dark);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #333;
            background: var(--input-bg-dark);
            color: var(--text-color-dark);
            font-size: 16px;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .rating-stars {
            display: flex;
            flex-direction: row-reverse;
            justify-content: flex-end;
            margin-bottom: 20px;
        }

        .rating-stars input {
            display: none;
        }

        .rating-stars label {
            cursor: pointer;
            font-size: 30px;
            color: #555;
            padding: 5px;
            transition: all 0.3s;
        }
        
        .light-mode .rating-stars label {
            color: #ccc;
        }

        .rating-stars label:hover,
        .rating-stars label:hover ~ label,
        .rating-stars input:checked ~ label {
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }

        .previous-reviews {
            margin-top: 30px;
            text-align: right;
        }

        .previous-reviews h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 24px;
        }

        .review-card {
            background: var(--feature-card-bg-dark);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.2);
            text-align: right;
        }

        .review-card strong {
            color: var(--primary-color);
            font-size: 18px;
            display: block;
            margin-bottom: 5px;
        }

        .review-card .stars {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 20px;
        }

        .review-card p {
            color: var(--text-color-dark);
            font-size: 15px;
        }

        footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px 0;
            color: #aaa;
            font-size: 14px;
            border-top: 1px solid var(--border-color-dark);
        }

        .active-btn {
            background-color: #5865f2;
            box-shadow: 0 0 20px rgba(88, 101, 242, 0.7);
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
            100% {
                transform: translateY(0px);
            }
        }

        .floating {
            animation: float 4s ease-in-out infinite;
        }

        .mode-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--primary-color);
            color: #fff;
            padding: 10px 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            box-shadow: 0 0 15px var(--primary-shadow-color);
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .mode-toggle:hover {
            background-color: #5865f2;
            box-shadow: 0 0 20px rgba(88, 101, 242, 0.8);
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 20px;
                justify-content: center;
            }

            .buttons {
                flex-direction: column;
                gap: 15px;
            }

            .title {
                font-size: 36px;
            }

            .subtitle {
                font-size: 18px;
            }

            .features-container {
                grid-template-columns: 1fr;
            }
            
            .mode-toggle {
                bottom: 10px;
                left: 10px;
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
        }

        .success-message, .error-message, .spam-message {
            display: none;
            background-color: rgba(46, 204, 113, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
        }
        
        .error-message, .spam-message {
            background-color: rgba(231, 76, 60, 0.8);
        }

        .login-section {
            background: var(--card-bg-dark);
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 0 30px var(--primary-shadow-color);
            text-align: right;
        }

        .login-section h2 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .login-info {
            background: var(--feature-card-bg-dark);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: right;
            border: 1px solid var(--primary-shadow-color);
        }

        .login-info p {
            margin-bottom: 5px;
            color: var(--text-color-dark);
        }
    </style>
</head>
<body>
    <div class="mode-toggle" id="mode-toggle">
        <span id="mode-icon">☀️</span>
    </div>

    <div class="container">
        <header>
            <div class="logo">
                <img src="https://cdn.discordapp.com/attachments/1137869934010052668/1376280348375126127/1235C5DC-3270-4A6C-AD84-720FDB7DC7AF.png?ex=6834c075&is=68336ef5&hm=d86bd3aed8939e6ec051909f6521e13a96966b0cf5d13588842b171022145738&" alt="SWP COMMUNITY Logo">
                <div class="logo-text">SWP COMMUNITY</div>
            </div>
            <nav>
                <ul>
                    <li><button id="home-btn" class="btn active-btn" onclick="showPage('home-page')">الرئيسية</button></li>
                    <li><button id="features-btn" class="btn" onclick="showPage('features-page')">المميزات</button></li>
                    <li><button id="rules-btn" class="btn" onclick="showPage('rules-page')">القوانين</button></li>
                    <li><button id="rating-btn" class="btn" onclick="showPage('rating-page')">التقييم</button></li>
                    <li><button id="contact-btn" class="btn" onclick="showPage('contact-page')">تواصل معنا</button></li>
                </ul>
            </nav>
        </header>

        <div class="main-content">
            <h1 class="title floating">مرحباً بك في SWP SERVER</h1>
            <p class="subtitle">موقع احترافي لتعريف وتقييم السيرفر من برمجة فراس</p>
            
            <div id="login-section" class="login-section">
                <h2>تسجيل الدخول / معلومات المستخدم</h2>
                <div id="logged-out-view">
                    <div class="form-group">
                        <label for="username-input">أدخل اسم المستخدم (للتجربة):</label>
                        <input type="text" id="username-input" placeholder="اسم المستخدم">
                    </div>
                    <button class="btn" onclick="loginUser()">تسجيل الدخول</button>
                </div>
                <div id="logged-in-view" style="display: none;">
                    <div class="login-info">
                        <p>أهلاً بك، <strong id="display-username"></strong>!</p>
                        <p>عدد زوار الموقع: <span id="visitor-count">0</span></p>
                    </div>
                    <button class="btn" onclick="logoutUser()">تسجيل الخروج</button>
                </div>
            </div>

            <div class="buttons">
                <button class="btn" onclick="showPage('features-page')">مميزات السيرفر</button>
                <button class="btn" onclick="showPage('rules-page')">استعراض القوانين</button>
                <button class="btn" onclick="showPage('rating-page')">إرسال تقييم</button>
                <button class="btn" onclick="showPage('contact-page')">تواصل معنا</button>
            </div>

            <div id="home-page" class="page" style="display: block;">
                <h2>أهلاً بك في موقعنا الرسمي</h2>
                <p>نحن نقدم خدمات احترافية في مجال ماين كرافت، ونسعى دائماً لتقديم أفضل السيرفرات والالعاب للاعبينا.</p>
                <p>استكشف موقعنا لمعرفة المزيد عن خدماتنا ومميزات السيرفر وقوانين استخدامها، ولا تنسى مشاركتنا رأيك من خلال صفحة التقييم.</p>
                <p>انضم إلينا اليوم واحصل على تجربة فريدة من نوعها مع فريق محترف يهتم بأدق التفاصيل.</p>
            </div>

            <div id="features-page" class="page">
                <h2>مميزات سيرفر SWP server</h2>
                <p>يوفر سيرفر SWP server مجموعة من المزايا والخصائص لضمان متعتك وتسهيل تجربتك</p>
                
                <div class="features-container">
                    <div class="feature-card">
                        <div class="feature-icon">🏴‍☠️</div>
                        <h3 class="feature-title">مود ون بيس</h3>
                        <p class="feature-desc">.المود الاساسي للسيرفر وهو مود الانمي الشهير ون بيس</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">🤖</div>
                        <h3 class="feature-title">بوتات مخصصة</h3>
                        <p class="feature-desc">نحن نعمل مع طاقم البرمجة لتطوير بوتات تساعدك على تجربتك في السيرفر وتكون خاصة بنا</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">🎁</div>
                        <h3 class="feature-title">فعاليات وهدايا</h3>
                        <p class="feature-desc">نقدم نحن ادارة SWP server هدايا وفعاليات يومية واسبوعية</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">🔒</div>
                        <h3 class="feature-title">أنظمة حماية متطورة</h3>
                        <p class="feature-desc">حماية شاملة للسيرفر ضد هجمات الرايد والسبام وغيرها من المخاطر الأمنية.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">🎭</div>
                        <h3 class="feature-title">نظام رتب تفاعلي</h3>
                        <p class="feature-desc">نظام رتب متطور يتيح للأعضاء التفاعل والحصول على رتب مميزة بناءً على نشاطهم.</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">🎮</div>
                        <h3 class="feature-title">أنشطة ترفيهية</h3>
                        <p class="feature-desc">نعمل على اضافة العاب جانبية غير اللعبة الاساسية ماين كرافت</p>
                    </div>
                </div>
            </div>

            <div id="rules-page" class="page">
                <h2>قوانين استخدام الخدمات</h2>
                
                <h3 style="color: var(--primary-color); margin-top: 20px; margin-bottom: 10px;">قوانين ديسكورد:</h3>
                <ul>
                    <li>احترام جميع المستخدمين وتجنب الإساءة اللفظية أو الشخصية.</li>
                    <li>يُمنع نشر أي محتوى غير لائق أو مخالف لشروط استخدام ديسكورد.</li>
                    <li>يجب الالتزام بالقنوات المخصصة لكل موضوع والحفاظ على نظام السيرفر.</li>
                    <li>يُمنع منعاً باتاً استخدام برامج التهكير أو البوتات المزعجة.</li>
                    <li>تجنب التكرار المفرط للرسائل أو المنشن للمستخدمين الآخرين.</li>
                    <li>يُمنع مشاركة روابط لمواقع مشبوهة أو ضارة.</li>
                    <li>يجب احترام خصوصية المستخدمين الآخرين وعدم نشر معلوماتهم الشخصية.</li>
                </ul>

                <h3 style="color: var(--primary-color); margin-top: 20px; margin-bottom: 10px;">قوانين SWP server:</h3>
                <ul>
                    <li>يجب الالتزام وعدم استعمال الفواكه الممنوعة : ظلام - ظلام مطورة - زلزال - سول</li>
                    <li>يمنع منعا باتا استعمال الفواكه قرب السبون</li>
                    <li>يمنع قتل احد بدون سبب</li>
                    <li>عندما تأكل فاكهة يسمح لك بتغييرها بعد عشرين دقيقة فقط</li>
                    <li>يمنع نشر معلومات او موقع المقر</li>
                    <li>ممنوع تخالف اوامر قائد الاسطول بالنسبة للبحرية</li>
                    <li>ممنوع تخالف اوامر شخص في حال كلبشك</li>
                </ul>
            </div>

            <div id="rating-page" class="page">
                <h2>شاركنا تقييمك</h2>
                <div class="rating-form">
                    <form id="feedback-form">
                        <div class="form-group">
                            <label>التقييم:</label>
                            <div class="rating-stars">
                                <input type="radio" id="star5" name="rating" value="5" />
                                <label for="star5">★</label>
                                <input type="radio" id="star4" name="rating" value="4" />
                                <label for="star4">★</label>
                                <input type="radio" id="star3" name="rating" value="3" />
                                <label for="star3">★</label>
                                <input type="radio" id="star2" name="rating" value="2" />
                                <label for="star2">★</label>
                                <input type="radio" id="star1" name="rating" value="1" />
                                <label for="star1">★</label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name">الاسم:</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        <div class="form-group">
                            <label for="discord-username">اسم المستخدم في ديسكورد:</label>
                            <input type="text" id="discord-username" name="discord-username">
                        </div>
                        <div class="form-group">
                            <label for="feedback">رأيك:</label>
                            <textarea id="feedback" name="feedback" required></textarea>
                        </div>
                        <button type="submit" class="btn" id="submit-review-btn">إرسال التقييم</button>
                    </form>
                    <div class="success-message" id="success-message">
                        تم إرسال تقييمك بنجاح! شكراً لك على وقتك.
                    </div>
                    <div class="error-message" id="error-message">
                        حدث خطأ أثناء إرسال التقييم. يرجى المحاولة مرة أخرى.
                    </div>
                     <div class="spam-message" id="spam-message">
                        يرجى الانتظار قبل إرسال تقييم آخر.
                    </div>
                     <div class="spam-message" id="profanity-message">
                        التعليق يحتوي على كلمات غير لائقة.
                    </div>
                </div>

                <div class="previous-reviews">
                    <h3>تقييمات المستخدمين السابقين:</h3>
                    <div id="reviews-list">
                        </div>
                </div>
            </div>

            <div id="contact-page" class="page">
                <h2>تواصل معنا</h2>
                <p>يمكنك التواصل معنا عبر سيرفر الديسكورد الخاص بنا للحصول على الدعم أو لطرح استفساراتك.</p>
                <p>نحن نسعد بتلقي ملاحظاتكم واقتراحاتكم.</p>
                <div class="buttons">
                    <a href="https://discord.gg/3BUhsURc" target="_blank" class="btn">انضم إلى سيرفر الديسكورد</a>
                </div>
            </div>
        </div>

        <footer>
            جميع الحقوق محفوظة &copy; 2025 - ! firas فراس - SWP server
        </footer>
    </div>

    <script>
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1375810250392866917/UxvJY93G_hQjW4XtUUYdtCMtfPwGmQOSKqVHTBDKYz3a_U239Bm8UUd4mdZObB8H7dAw';
        const COOLDOWN_PERIOD = 60000; // 60 seconds

        const badWords = [
            "fuck", "shit", "asshole", "bitch", "bastard", "damn", "crap", "idiot", "moron",
            "خرا", "زفت", "كلب", "ابن كلب", "حقير", "وسخ", "قذر", "حمار", "بقرة", "غبي", "متخلف",
            "نجس", "عاهر", "مخنث", "داعشي", "إرهابي", "كافر", "ملحد", "زنديق", "شاذ", "دعارة",
            "جنس", "عري", "إباحي", "فاحش", "بذيء", "سباب", "شتيمة", "لعن", "تفاهة", "هراء",
            "احا", "كس", "طيز", "زب", "مص", "نيك", "قحبة", "دعس", "بنت وسخة", "حيوان",
            "خنزير", "قرد", "صعلوك", "تافه", "زبالة"
        ]; // More bad words can be added

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(pageId).style.display = 'block';
            
            document.querySelectorAll('nav .btn').forEach(btn => {
                btn.classList.remove('active-btn');
            });
            const activeBtn = pageId.replace('-page', '-btn');
            const navButton = document.getElementById(activeBtn);
            if (navButton) {
                navButton.classList.add('active-btn');
            }

            // Specific actions for rating page
            if (pageId === 'rating-page') {
                loadReviews();
                loadSavedUserInfo();
            }
        }

        // --- Login System ---
        function updateLoginDisplay() {
            const username = localStorage.getItem('loggedInUser');
            if (username) {
                document.getElementById('logged-out-view').style.display = 'none';
                document.getElementById('logged-in-view').style.display = 'block';
                document.getElementById('display-username').textContent = username;
            } else {
                document.getElementById('logged-out-view').style.display = 'block';
                document.getElementById('logged-in-view').style.display = 'none';
            }
        }

        function loginUser() {
            const usernameInput = document.getElementById('username-input');
            const username = usernameInput.value.trim();
            if (username) {
                localStorage.setItem('loggedInUser', username);
                updateLoginDisplay();
                alert(`مرحباً بك، ${username}!`);
                usernameInput.value = ''; // Clear input after login
            } else {
                alert('الرجاء إدخال اسم المستخدم.');
            }
        }

        function logoutUser() {
            localStorage.removeItem('loggedInUser');
            updateLoginDisplay();
            alert('تم تسجيل الخروج بنجاح.');
        }

        
        function updateVisitorCount() {
            let count = localStorage.getItem('visitorCount');
            if (count === null) {
                count = 0;
            } else {
                count = parseInt(count);
            }
            count++;
            localStorage.setItem('visitorCount', count);
            document.getElementById('visitor-count').textContent = count;
        }

        
        function loadReviews() {
            const reviewsList = document.getElementById('reviews-list');
            reviewsList.innerHTML = ''; // Clear existing reviews
            const reviews = JSON.parse(localStorage.getItem('userReviews')) || [];

            if (reviews.length === 0) {
                reviewsList.innerHTML = '<p>لا توجد تقييمات سابقة لعرضها.</p>';
                return;
            }

            reviews.forEach(review => {
                const reviewCard = document.createElement('div');
                reviewCard.classList.add('review-card');
                reviewCard.innerHTML = `
                    <strong>${review.name || 'مجهول'}</strong>
                    <div class="stars">${'★'.repeat(review.rating)}</div>
                    <p>${review.feedback}</p>
                    ${review.discordUsername ? `<small>اسم المستخدم في ديسكورد: ${review.discordUsername}</small>` : ''}
                `;
                reviewsList.prepend(reviewCard); 
            });
        }

        function saveReview(review) {
            const reviews = JSON.parse(localStorage.getItem('userReviews')) || [];
            reviews.push(review);
            localStorage.setItem('userReviews', JSON.stringify(reviews));
            loadReviews(); // Reload reviews after saving
        }

        function loadSavedUserInfo() {
            const savedName = localStorage.getItem('savedName');
            const savedDiscordUsername = localStorage.getItem('savedDiscordUsername');

            if (savedName) {
                document.getElementById('name').value = savedName;
            }
            if (savedDiscordUsername) {
                document.getElementById('discord-username').value = savedDiscordUsername;
            }
        }

        function filterProfanity(text) {
            let cleanedText = text;
            badWords.forEach(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi'); // Whole word, case-insensitive
                cleanedText = cleanedText.replace(regex, '*'.repeat(word.length));
            });
            return cleanedText;
        }
        
        function containsProfanity(text) {
            return badWords.some(word => {
                const regex = new RegExp(`\\b${word}\\b`, 'gi');
                return regex.test(text);
            });
        }

        document.getElementById('feedback-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            
            const lastSubmissionTime = localStorage.getItem('lastReviewSubmission');
            if (lastSubmissionTime && (Date.now() - lastSubmissionTime < COOLDOWN_PERIOD)) {
                document.getElementById('spam-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('spam-message').style.display = 'none';
                }, 3000);
                return;
            }

            const rating = document.querySelector('input[name="rating"]:checked') ? document.querySelector('input[name="rating"]:checked').value : "غير محدد";
            let name = document.getElementById('name').value;
            let discordUsername = document.getElementById('discord-username').value;
            let feedback = document.getElementById('feedback').value;

            
            if (containsProfanity(feedback)) {
                document.getElementById('profanity-message').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('profanity-message').style.display = 'none';
                }, 5000);
                return;
            }
            feedback = filterProfanity(feedback);


            // Save user info for later use
            localStorage.setItem('savedName', name);
            localStorage.setItem('savedDiscordUsername', discordUsername);

            const webhookData = {
                embeds: [{
                    title: "تقييم جديد",
                    color: 4886754,
                    fields: [
                        {
                            name: "الاسم",
                            value: name,
                            inline: true
                        },
                        {
                            name: "التقييم",
                            value: "★".repeat(rating) + "☆".repeat(5 - rating),
                            inline: true
                        },
                        {
                            name: "اسم المستخدم في ديسكورد",
                            value: discordUsername || "غير محدد",
                            inline: true
                        },
                        {
                            name: "التعليق",
                            value: feedback
                        }
                    ],
                    timestamp: new Date().toISOString(),
                    footer: {
                        text: "BA COMMUNITY Rating System"
                    }
                }]
            };
            
            fetch(DISCORD_WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(webhookData),
            })
            .then(response => {
                if (response.ok) {
                    document.getElementById('success-message').style.display = 'block';
                    document.getElementById('feedback-form').reset();
                    
                    saveReview({ name, rating, discordUsername, feedback });
                    localStorage.setItem('lastReviewSubmission', Date.now()); 

                    setTimeout(() => {
                        document.getElementById('success-message').style.display = 'none';
                    }, 5000);
                } else {
                    document.getElementById('error-message').style.display = 'block';
                    setTimeout(() => {
                        document.getElementById('error-message').style.display = 'none';
                    }, 5000);
                    // alert('حدث خطأ أثناء إرسال التقييم. يرجى المحاولة مرة أخرى.');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('error-message').style.display = 'block';
                 setTimeout(() => {
                    document.getElementById('error-message').style.display = 'none';
                }, 5000);
                // alert('حدث خطأ أثناء إرسال التقييم. يرجى المحاولة مرة أخرى.');
            });
        });

        const buttons = document.querySelectorAll('.btn');
        buttons.forEach(button => {
            button.addEventListener('mouseover', () => {
                button.style.boxShadow = '0 0 25px rgba(114, 137, 218, 0.9)';
            });
            
            button.addEventListener('mouseout', () => {
                if (!button.classList.contains('active-btn')) {
                    button.style.boxShadow = '0 0 15px rgba(114, 137, 218, 0.5)';
                }
            });
        });

       
        const modeToggle = document.getElementById('mode-toggle');
        const modeIcon = document.getElementById('mode-icon');

        function setMode(mode) {
            if (mode === 'light') {
                document.body.classList.add('light-mode');
                modeIcon.textContent = '🌙'; 
                localStorage.setItem('theme', 'light');
            } else {
                document.body.classList.remove('light-mode');
                modeIcon.textContent = '☀️'; 
                localStorage.setItem('theme', 'dark');
            }
        }

        modeToggle.addEventListener('click', () => {
            if (document.body.classList.contains('light-mode')) {
                setMode('dark');
            } else {
                setMode('light');
            }
        });

        
        const savedTheme = localStorage.getItem('theme') || 'dark'; 
        setMode(savedTheme);

        
        document.addEventListener('DOMContentLoaded', () => {
            showPage('home-page'); 
            updateLoginDisplay(); 
            updateVisitorCount(); 
            loadReviews(); 
            loadSavedUserInfo(); 
        });
    </script>
</body>
</html>
